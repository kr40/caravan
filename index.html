<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Caravan Adventures</title>
		<link rel="stylesheet" href="src/css/styles.css" />
	</head>
	<body>
		<!-- Three.js Canvas Container -->
		<div id="game-container"></div>

		<!-- HUD Overlay -->
		<div id="hud">
			<div class="hud-panel clickable" id="hud-panel">
				<h2>Caravan Status ‚ñº</h2>
				<div class="hud-stats">
					<div class="stat">
						<span class="label">Gold:</span>
						<span id="gold-display" class="value">1000</span>
					</div>
					<div class="stat">
						<span class="label">Food:</span>
						<span id="food-display" class="value">50</span>
					</div>
					<div class="stat">
						<span class="label">Cargo:</span>
						<span id="cargo-display" class="value">0/100</span>
					</div>
					<div class="stat">
						<span class="label">Date:</span>
						<span id="date-display" class="value">1st Day of Spring, Year 1</span>
					</div>
				</div>
			</div>
		</div>

		<!-- Minimap -->
		<div id="minimap-container">
			<h3>Map</h3>
			<canvas id="minimap" width="200" height="200"></canvas>
			<div class="minimap-controls">
				<button id="zoom-in-btn" class="minimap-zoom-btn" title="Zoom In">+</button>
				<button id="zoom-out-btn" class="minimap-zoom-btn" title="Zoom Out">‚àí</button>
			</div>
		</div>

		<!-- City Tooltip -->
		<div id="city-tooltip" class="tooltip hidden">
			<h3 id="tooltip-city-name"></h3>
			<div class="tooltip-section">
				<div class="tooltip-row">
					<span class="tooltip-label">Terrain:</span>
					<span id="tooltip-terrain"></span>
				</div>
				<div class="tooltip-row">
					<span class="tooltip-label">Produces:</span>
					<span id="tooltip-produces"></span>
				</div>
				<div class="tooltip-row">
					<span class="tooltip-label">Demands:</span>
					<span id="tooltip-consumes"></span>
				</div>
				<div class="tooltip-row">
					<span class="tooltip-label">Roads to:</span>
					<span id="tooltip-connections"></span>
				</div>
			</div>
		</div>

		<!-- Caravan Details Modal -->
		<div id="caravan-modal" class="modal hidden">
			<div class="modal-content caravan-details-content">
				<div class="modal-header">
					<h2>Caravan Chronicles</h2>
					<button id="close-caravan-modal" class="close-btn">&times;</button>
				</div>
				<div class="modal-body caravan-body">
					<!-- Portrait and Cart Section -->
					<div class="caravan-visuals">
						<div class="portrait-section">
							<div class="portrait-frame">
								<div class="portrait-image">üßô‚Äç‚ôÇÔ∏è</div>
								<p class="portrait-label">Master Trader</p>
							</div>
						</div>
						<div class="cart-section">
							<div class="cart-frame">
								<div class="cart-image">üêéÔøΩ</div>
								<p class="cart-label">Your Caravan</p>
							</div>
						</div>
					</div>

					<!-- Detailed Stats Section -->
					<div class="details-section">
						<h3>Caravan Statistics</h3>
						<div class="detail-stats">
							<div class="detail-row">
								<span class="detail-label">Current Location:</span>
								<span id="current-location" class="detail-value">Open Road</span>
							</div>
							<div class="detail-row">
								<span class="detail-label">Gold Coins:</span>
								<span id="detail-gold" class="detail-value">1000</span>
							</div>
							<div class="detail-row">
								<span class="detail-label">Food Supplies:</span>
								<span id="detail-food" class="detail-value">50 units</span>
							</div>
							<div class="detail-row">
								<span class="detail-label">Cargo Capacity:</span>
								<span id="detail-cargo" class="detail-value">0 / 100</span>
							</div>
							<div class="detail-row">
								<span class="detail-label">Current Date:</span>
								<span id="detail-date" class="detail-value">1st Day of Spring, Year 1</span>
							</div>
							<div class="detail-row">
								<span class="detail-label">Days Traveled:</span>
								<span id="days-traveled" class="detail-value">0</span>
							</div>
							<div class="detail-row">
								<span class="detail-label">Total Trades:</span>
								<span id="total-trades" class="detail-value">0</span>
							</div>
							<div class="detail-row">
								<span class="detail-label">Profit Earned:</span>
								<span id="total-profit" class="detail-value">0 gold</span>
							</div>
						</div>
					</div>

					<!-- Current Cargo Section -->
					<div class="details-section">
						<h3>Current Cargo</h3>
						<div id="current-cargo-list" class="cargo-inventory">
							<p class="empty-message">No cargo currently loaded</p>
						</div>
					</div>

					<!-- Journey History -->
					<div class="details-section">
						<h3>Journey History</h3>
						<div id="journey-history" class="history-list">
							<p class="empty-message">Your journey begins...</p>
						</div>
					</div>

					<!-- Trading History -->
					<div class="details-section">
						<h3>Recent Trades</h3>
						<div id="trading-history" class="history-list">
							<p class="empty-message">No trades recorded yet</p>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- City Modal -->
		<div id="city-modal" class="modal hidden">
			<div class="modal-content">
				<div class="modal-header">
					<h2 id="city-name">City Name</h2>
					<button id="close-modal" class="close-btn">&times;</button>
				</div>
				<div class="modal-body">
					<div id="city-menu">
						<div class="backstory-section">
							<h3>About This City</h3>
							<p id="city-backstory" class="backstory-text"></p>
						</div>
						<button id="market-btn" class="menu-btn">Enter Market</button>
						<div class="inn-section">
							<h3>Inn & Supplies</h3>
							<p>Restock food for your journey (2 gold per unit)</p>
							<div class="food-purchase">
								<input type="number" id="food-qty" value="10" min="1" max="100" />
								<button id="buy-food-btn" class="action-btn buy-btn">Buy Food</button>
							</div>
						</div>
						<button id="leave-city-btn" class="menu-btn">Leave City</button>
					</div>
					<div id="market-view" class="hidden">
						<h3>Market</h3>
						<div class="market-info">
							<p>Buy low, sell high!</p>
						</div>
						<div id="goods-list" class="goods-container">
							<!-- Goods will be dynamically inserted here -->
						</div>
						<div class="market-actions">
							<button id="back-to-city-btn" class="menu-btn">Back to City</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Instructions -->
		<div id="instructions">
			<p>
				Click/drag to pan camera. Scroll to zoom. Hover over cities for info. Click cities to travel. Press ~ for debug
				menu.
			</p>
		</div>

		<!-- Debug Menu -->
		<div id="debug-menu" class="modal hidden">
			<div class="modal-content debug-content">
				<div class="modal-header">
					<h2>Debug Console</h2>
					<button id="close-debug" class="close-btn">&times;</button>
				</div>
				<div class="modal-body">
					<div class="debug-section">
						<h3>Resources</h3>
						<div class="debug-controls">
							<div class="debug-control">
								<label>Gold:</label>
								<input type="number" id="debug-gold" value="1000" min="0" step="100" />
								<button id="set-gold-btn" class="debug-btn">Set</button>
							</div>
							<div class="debug-control">
								<label>Food:</label>
								<input type="number" id="debug-food" value="50" min="0" step="10" />
								<button id="set-food-btn" class="debug-btn">Set</button>
							</div>
						</div>
					</div>

					<div class="debug-section">
						<h3>Quick Actions</h3>
						<div class="debug-actions">
							<button id="add-gold-btn" class="debug-btn">+1000 Gold</button>
							<button id="add-food-btn" class="debug-btn">+100 Food</button>
							<button id="clear-cargo-btn" class="debug-btn">Clear Cargo</button>
							<button id="fill-cargo-btn" class="debug-btn">Fill Cargo (Test Goods)</button>
						</div>
					</div>

					<div class="debug-section">
						<h3>Game State</h3>
						<div class="debug-actions">
							<button id="reset-game-btn" class="debug-btn danger">Reset Game</button>
							<button id="advance-day-btn" class="debug-btn">+10 Days</button>
							<button id="reset-camera-btn" class="debug-btn">Reset Camera</button>
						</div>
					</div>

					<div class="debug-section">
						<h3>Teleport</h3>
						<div class="debug-teleport">
							<select id="teleport-city" class="debug-select">
								<option value="rivertown">Rivertown</option>
								<option value="mountainhold">Mountainhold</option>
								<option value="portcity">Port City</option>
								<option value="vineyards">The Vineyards</option>
								<option value="eastmarket">East Market</option>
								<option value="northkeep">North Keep</option>
								<option value="sandport">Sand Port</option>
								<option value="foresthold">Forest Hold</option>
								<option value="windmill">Windmill Town</option>
								<option value="silvermine">Silvermine</option>
								<option value="laketown">Laketown</option>
								<option value="stormhaven">Stormhaven</option>
								<option value="goldenfields">Golden Fields</option>
								<option value="highcliff">High Cliff</option>
								<option value="ironforge">Ironforge</option>
							</select>
							<button id="teleport-btn" class="debug-btn">Teleport</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Three.js Library -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

		<!-- Game Data -->
		<script src="src/data/config.js"></script>
		<script src="src/data/goods.js"></script>
		<script src="src/data/cities.js"></script>
		<script src="src/data/roads.js"></script>

		<!-- Game Core -->
		<script src="src/js/gameState.js"></script>

		<!-- Managers -->
		<script src="src/managers/worldManager.js"></script>
		<script src="src/managers/caravanManager.js"></script>
		<script src="src/managers/cityManager.js"></script>
		<script src="src/managers/roadManager.js"></script>

		<!-- Systems -->
		<script src="src/systems/marketSystem.js"></script>
		<script src="src/systems/inputSystem.js"></script>
		<script src="src/systems/resourceSystem.js"></script>
		<script src="src/systems/pathfindingSystem.js"></script>

		<!-- UI -->
		<script src="src/ui/uiManager.js"></script>
		<script src="src/ui/debugManager.js"></script>
		<script src="src/ui/minimapManager.js"></script>
		<script src="src/ui/tooltipManager.js"></script>

		<!-- Main Game -->
		<script src="src/js/main.js"></script>
	</body>
</html>
